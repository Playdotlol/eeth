<!DOCTYPE html>
<html lang="en" class="bg-gray-900 text-white">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CyberEmulator</title>

  <!-- EmulatorJS Config -->
  <script>
    EJS_player = "#emulator";
    EJS_gamepadSupport = true;
    EJS_fullscreenOnLoaded = false;
    EJS_multitap = false;
    EJS_mouse = false;
    EJS_pathtodata = "https://cdn.emulatorjs.org/stable/data/";
  </script>
  <script src="https://cdn.emulatorjs.org/stable/data/loader.js"></script>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="p-4 flex flex-col items-center space-y-4 bg-gray-900 text-white min-h-screen">

  <h1 class="text-4xl font-bold text-cyan-400">üéÆ CyberEmulator</h1>
  <p class="text-gray-400">Play retro games directly in your browser</p>

  <!-- Game Grid -->
  <div id="gameGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 max-w-6xl w-full"></div>

  <!-- Upload -->
  <div class="flex gap-2 items-center">
    <input id="romInput" type="file" accept=".nes,.gb,.gba,.sfc,.smc,.z64,.n64" class="text-black"/>
    <button id="uploadBtn" class="bg-cyan-600 text-black px-4 py-2 rounded font-bold">Play Upload</button>
  </div>

  <!-- Controls -->
  <div class="flex flex-wrap justify-center gap-2">
    <button onclick="EJS_fullscreen()" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded">üñ•Ô∏è Fullscreen</button>
    <button onclick="EJS_saveState()" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded">üíæ Save</button>
    <button onclick="EJS_loadState()" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded">üìÇ Load</button>
    <button onclick="resetEmu()" class="bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded">üîÑ Reset</button>
  </div>

  <!-- Emulator Container -->
  <div id="emulator" class="w-full max-w-4xl h-80 border-4 border-cyan-500 rounded shadow-lg"></div>

  <!-- Game Data + Script -->
  <script>
    const games = [
      {
        title: "Donkey Kong (NES)",
        core: "nes",
        url: "https://cdn.emulatorjs.org/stable/roms/nes/donkeykong.nes",
        img: "https://upload.wikimedia.org/wikipedia/en/3/3b/Donkey_Kong_cover.png"
      },
      {
        title: "Tetris (GB)",
        core: "gb",
        url: "https://cdn.emulatorjs.org/stable/roms/gb/tetris.gb",
        img: "https://upload.wikimedia.org/wikipedia/en/7/7c/Tetris_Boxshot.jpg"
      },
      {
        title: "Dr. Mario (GBA)",
        core: "gba",
        url: "https://cdn.emulatorjs.org/stable/roms/gba/DrMario.gba",
        img: "https://upload.wikimedia.org/wikipedia/en/7/7c/Dr._Mario_box_art.jpg"
      },
      {
        title: "DK Country (SNES)",
        core: "snes",
        url: "https://cdn.emulatorjs.org/stable/roms/snes/dkc.smc",
        img: "https://upload.wikimedia.org/wikipedia/en/4/4e/DonkeyKongCountry_SNESboxart.jpg"
      },
      {
        title: "Mario Kart (GBA)",
        core: "gba",
        url: "https://cdn.emulatorjs.org/stable/roms/gba/mk.gba",
        img: "https://upload.wikimedia.org/wikipedia/en/f/fb/Mario_Kart_Super_Circuit_boxart.jpg"
      },
      {
        title: "Metroid (NES)",
        core: "nes",
        url: "https://cdn.emulatorjs.org/stable/roms/nes/metroid.nes",
        img: "https://upload.wikimedia.org/wikipedia/en/2/2e/Metroid_box.jpg"
      }
    ];

    const grid = document.getElementById("gameGrid");
    games.forEach(g => {
      const div = document.createElement("div");
      div.className = "bg-gray-800 p-4 rounded shadow flex flex-col items-center";
      div.innerHTML = `
        <img src="${g.img}" class="rounded w-full h-40 object-cover mb-2" alt="${g.title}" />
        <h3 class="text-center font-semibold mb-2">${g.title}</h3>
        <button class="bg-cyan-500 hover:bg-cyan-400 text-black px-4 py-2 rounded font-bold">Play</button>
      `;
      div.querySelector("button").onclick = () => startGame(g.core, g.url);
      grid.appendChild(div);
    });

    document.getElementById("uploadBtn").onclick = () => {
      const f = document.getElementById("romInput").files[0];
      if (!f) return alert("Select a ROM file first!");
      const ext = f.name.split('.').pop().toLowerCase();
      const coreMap = {
        nes: "nes", gb: "gb", gba: "gba",
        smc: "snes", sfc: "snes",
        n64: "n64", z64: "n64"
      };
      const core = coreMap[ext];
      if (!core) return alert("Unsupported file type: " + ext);
      const url = URL.createObjectURL(f);
      startGame(core, url);
    };

    function startGame(core, url) {
      document.getElementById("emulator").innerHTML = "";
      EJS_core = core;
      EJS_gameUrl = url;
      EJS_start();
    }

    function resetEmu() {
      document.getElementById("emulator").innerHTML = "";
    }
  </script>
</body>
</html>
